;/*FB_PKG_DELIM*/

__d("MWV2ChatOverflowHead.react",["fbt","ix","ARIA_LABEL_PLACEHOLDER_FIXME","CometContextualLayer.react","CometTextWithEntities.react","FDSListCellGlimmer.react","FDSMenuItemBase.react","GroupsCometChatsEngagementLogger","I64","LSIntEnum","LSThreadAttributionStore","LSThreadTitle.react","MDSGlimmer.react","MWChatHeadPicture.react","MWChatInteraction","MWChatStateActions","MWChatStateV2.react","MWChatStateV2Types","MWChatTextTransform","MWPActor.react","MWV2ChatHeadButton.react","MWV2EnsureThatChatTabExists","MWXIcon.react","MWXMenu.react","MWXText.react","ReQL","ReQLSuspense","fbicon","getLSMediaContactProfilePictureUrl","mwCMIsAnyCMThread","react","react-compiler-runtime","recoverableViolation","stylex","useMWChatOpenTabTraceProvider","useMWFacepileGetContactsToShow","useReStore","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n,o=n||(n=d("react"));b=n;var p=b.useRef,q=b.useState;function r(a){var b,e=d("MWPActor.react").useActor(),g=(j||(j=c("useReStore")))();return(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(a).map(function(b){return d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(g.tables.messages).getKeyRange(a).take(20).bounds({gt:d("ReQL").key(b.lastReadWatermarkTimestampMs)}).filter(function(a){return!(m||(m=d("I64"))).equal(a.senderId,e)}),f.id+":76").length})},[g,e,a],f.id+":70"))!=null?b:0}function s(a){var b=d("react-compiler-runtime").c(7);a=a.thread;c("vulture")("kvsYp0ciNq");var e=r(a.threadKey),f;b[0]!==a?(f=o.jsx(c("LSThreadTitle.react"),{thread:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=e>0&&o.jsx(c("CometTextWithEntities.react"),{text:h._("__JHASH__-HzxiMQUhNs__JHASH__",[h._param("unread message count",String(e))]).toString(),transforms:d("MWChatTextTransform").textTransforms}),b[2]=e,b[3]=a):a=b[3];b[4]!==f||b[5]!==a?(e=o.jsxs(o.Fragment,{children:[f,a]}),b[4]=f,b[5]=a,b[6]=e):e=b[6];return e}var t={auxVisible:{visibility:"xnpuxes",$$css:!0},auxWrapper:{display:"x78zum5",visibility:"xlshs6z",$$css:!0}};function u(a){var b=d("react-compiler-runtime").c(14),e=a.closeTab,f=a.isItemHovered,g=a.setItemIsHovered;c("vulture")("alo9Pxw8cRh");b[0]!==f?(a=(k||(k=c("stylex"))).props(t.auxWrapper,f?t.auxVisible:!1),b[0]=f,b[1]=a):a=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__LLeka0bmVM0__JHASH__"),b[2]=f):f=b[2];var j;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(j=d("fbicon")._(i("478231"),12),b[3]=j):j=b[3];var l,m;b[4]!==g?(l=function(){return g(!0)},m=function(){return g(!1)},b[4]=g,b[5]=l,b[6]=m):(l=b[5],m=b[6]);b[7]!==e||b[8]!==l||b[9]!==m?(f=o.jsx(c("MWXIcon.react"),{"aria-label":f,color:"secondary",icon:j,onHoverIn:l,onHoverOut:m,onPress:e}),b[7]=e,b[8]=l,b[9]=m,b[10]=f):f=b[10];b[11]!==a||b[12]!==f?(j=o.jsx("div",babelHelpers["extends"]({},a,{children:f})),b[11]=a,b[12]=f,b[13]=j):j=b[13];return j}function v(a){var b=d("react-compiler-runtime").c(33),e=a.descriptor,g=a.setParentHoverState,h=a.tab;c("vulture")("2RsBjwZoBV0");var i=(j||(j=c("useReStore")))();b[0]!==i.tables.threads||b[1]!==e.threadKey?(a=function(){return d("ReQL").fromTableAscending(i.tables.threads).getKeyRange(e.threadKey)},b[0]=i.tables.threads,b[1]=e.threadKey,b[2]=a):a=b[2];var k;b[3]!==i||b[4]!==e.threadKey?(k=[i,e.threadKey],b[3]=i,b[4]=e.threadKey,b[5]=k):k=b[5];var n=d("ReQLSuspense").useFirst(a,k,f.id+":163"),p=d("MWChatStateV2.react").useDispatch(),r=c("useMWChatOpenTabTraceProvider")();d("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(e.threadKey,e.threadType,e.clientThreadKey);a=q(!1);k=a[0];var t=a[1];if(n!=null){b[6]!==n.threadType?(a=c("mwCMIsAnyCMThread")(n.threadType),b[6]=n.threadType,b[7]=a):a=b[7];var v=a;b[8]!==p||b[9]!==h.tabId?(a=function(){return p(d("MWChatStateActions").closeTab(Date.now(),h.tabId))},b[8]=p,b[9]=h.tabId,b[10]=a):a=b[10];var w;b[11]!==k||b[12]!==a||b[13]!==h?(w=o.jsx(u,{closeTab:a,isItemHovered:k,setItemIsHovered:t,tab:h}),b[11]=k,b[12]=a,b[13]=h,b[14]=w):w=b[14];b[15]!==p||b[16]!==v||b[17]!==g||b[18]!==h.tabId||b[19]!==n.parentThreadKey||b[20]!==n.threadKey||b[21]!==n.threadType||b[22]!==r?(k=function(){g(!1);d("LSThreadAttributionStore").setSource((m||(m=d("I64"))).to_string(n.threadKey),"chatheadsOverflow");r(function(a){d("MWChatInteraction").set((m||(m=d("I64"))).to_string(n.threadKey),a)},(l||(l=d("LSIntEnum"))).unwrapIntEnum(n.threadType),"chatheadsOverflow",n.threadKey);v&&d("GroupsCometChatsEngagementLogger").log({action:"tap",community_id:(m||(m=d("I64"))).to_string(n.parentThreadKey),event:"thread_open",source:"chat_bubble_overflow",surface:"chat_bubbles_container",thread_id:m.to_string(n.threadKey)});return p(d("MWChatStateActions").maximizeTab(Date.now(),h.tabId))},b[15]=p,b[16]=v,b[17]=g,b[18]=h.tabId,b[19]=n.parentThreadKey,b[20]=n.threadKey,b[21]=n.threadType,b[22]=r,b[23]=k):k=b[23];var x;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){return t(!0)},x=function(){return t(!1)},b[24]=a,b[25]=x):(a=b[24],x=b[25]);var y;b[26]!==n?(y=o.jsx(s,{thread:n}),b[26]=n,b[27]=y):y=b[27];b[28]!==w||b[29]!==k||b[30]!==y?(a=o.jsx(c("FDSMenuItemBase.react"),{aux:w,onClick:k,onHoverIn:a,onHoverOut:x,primaryText:y}),b[28]=w,b[29]=k,b[30]=y,b[31]=a):a=b[31];return a}b[32]===Symbol["for"]("react.memo_cache_sentinel")?(x=o.jsx("div",babelHelpers["extends"]({className:"xc9qbxq x5w4yej"},{children:o.jsx(c("FDSListCellGlimmer.react"),{imageStyle:"none"})})),b[32]=x):x=b[32];return x}function w(a){var b=d("react-compiler-runtime").c(7),e=a.excessHeads,f=a.setParentHoverState;c("vulture")("1IDdkeUS0d5");if(b[0]!==e||b[1]!==f){b[3]!==f?(a=function(a){var b=a.tabType;return b.type!==d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?o.jsx(v,{descriptor:b.threadKeyDescriptor,setParentHoverState:f,tab:a},String(a.tabId)):c("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_entrypoints")},b[3]=f,b[4]=a):a=b[4];a=e.map(a);b[0]=e;b[1]=f;b[2]=a}else a=b[2];b[5]!==a?(e=o.jsx(c("MWXMenu.react"),{"aria-label":c("ARIA_LABEL_PLACEHOLDER_FIXME"),size:"full",truncate:!0,withArrow:!0,children:a}),b[5]=a,b[6]=e):e=b[6];return e}function x(a){var b=d("react-compiler-runtime").c(10),e=a.count;a=a.thread;c("vulture")("833mGZc42iI");a=c("useMWFacepileGetContactsToShow")(a.threadKey,a.threadType);var f;b[0]!==a?(f=a.map(c("getLSMediaContactProfilePictureUrl")),b[0]=a,b[1]=f):f=b[1];a=f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x18l40ae x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xsdox4t xl56j7k x10l6tqk x13vifvy x1useyqa"},b[2]=f):f=b[2];var g;b[3]!==e?(g=h._("__JHASH__RM0bWy2OLZa__JHASH__",[h._param("chat count",String(e))]),b[3]=e,b[4]=g):g=b[4];b[5]!==g?(e=o.jsx("div",babelHelpers["extends"]({},f,{children:o.jsx(c("MWXText.react"),{color:"white",type:"bodyLink3",children:g})})),b[5]=g,b[6]=e):e=b[6];b[7]!==a||b[8]!==e?(f=o.jsx(c("MWChatHeadPicture.react"),{images:a,noDropShadow:!0,noFacepile:!0,children:e}),b[7]=a,b[8]=e,b[9]=f):f=b[9];return f}var y={glimmer:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function z(a){var b=d("react-compiler-runtime").c(10),e=a.count,g=a.tab;c("vulture")("169592ZZ9Tg");d("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(g.threadKey,g.threadType);var h=(j||(j=c("useReStore")))();b[0]!==h.tables.threads||b[1]!==g.threadKey?(a=function(){return d("ReQL").fromTableAscending(h.tables.threads).getKeyRange(g.threadKey)},b[0]=h.tables.threads,b[1]=g.threadKey,b[2]=a):a=b[2];var i;b[3]!==h||b[4]!==g.threadKey?(i=[h,g.threadKey],b[3]=h,b[4]=g.threadKey,b[5]=i):i=b[5];a=d("ReQLSuspense").useFirst(a,i,f.id+":327");if(a!=null){b[6]!==e||b[7]!==a?(i=o.jsx(x,{count:e,thread:a}),b[6]=e,b[7]=a,b[8]=i):i=b[8];return i}b[9]===Symbol["for"]("react.memo_cache_sentinel")?(e=o.jsx(c("MDSGlimmer.react"),{index:1,xstyle:y.glimmer}),b[9]=e):e=b[9];return e}function a(a){var b=d("react-compiler-runtime").c(23),e=a.excessHeads,f=a.onHoverChange;a=a.style;c("vulture")("1LLSw3uvmI8");var g=q(!1),i=g[0],j=g[1];g=e.length;var k=p(null);if(g<=0)return null;var l=e[0].tabType;l.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab&&c("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_entrypoints");var m;b[0]!==g?(m=h._("__JHASH__cpB5BWXmx9z__JHASH__",[h._param("chat count",String(g))]),b[0]=g,b[1]=m):m=b[1];var n,r;b[2]!==f?(n=function(){j(!0),f(!0)},r=function(){j(!1),f(!1)},b[2]=f,b[3]=n,b[4]=r):(n=b[3],r=b[4]);var s;b[5]!==g||b[6]!==l.threadKeyDescriptor||b[7]!==l.type?(s=l.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?null:o.jsx(z,{count:g,tab:l.threadKeyDescriptor}),b[5]=g,b[6]=l.threadKeyDescriptor,b[7]=l.type,b[8]=s):s=b[8];b[9]!==e||b[10]!==i?(g=i&&o.jsx(c("CometContextualLayer.react"),{align:"middle",contextRef:k,position:"end",children:o.jsx(w,{excessHeads:e,setParentHoverState:j})}),b[9]=e,b[10]=i,b[11]=g):g=b[11];b[12]!==n||b[13]!==r||b[14]!==s||b[15]!==g?(l=o.jsxs("div",{onMouseEnter:n,onMouseLeave:r,children:[s,g]}),b[12]=n,b[13]=r,b[14]=s,b[15]=g,b[16]=l):l=b[16];b[17]!==m||b[18]!==l?(e=o.jsx(d("MWV2ChatHeadButton.react").MWV2ChatHeadButton,{ariaLabel:m,ref:k,children:l}),b[17]=m,b[18]=l,b[19]=e):e=b[19];b[20]!==a||b[21]!==e?(i=o.jsx(d("MWV2ChatHeadButton.react").MWV2ChatHeadButtonContainer,{style:a,children:e}),b[20]=a,b[21]=e,b[22]=i):i=b[22];return i}g["default"]=a}),226);